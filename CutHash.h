#ifndef CUTHASH_H
#define CUTHASH_H

/// @file CutHash.h
/// @brief CutHash のヘッダファイル
/// @author Yusuke Matsunaga (松永 裕介)
///
/// Copyright (C) 2005-2012 Yusuke Matsunaga
/// All rights reserved.


#include "ym_networks/bdn.h"
#include "ym_logic/TvFunc.h"


BEGIN_NAMESPACE_YM_NETWORKS

class Cut;

//////////////////////////////////////////////////////////////////////
/// @class CutHash CutHash.h "CutHash.h"
/// @brief Cut のハッシュ表
//////////////////////////////////////////////////////////////////////
class CutHash
{
public:
  //////////////////////////////////////////////////////////////////////
  // コンストラクタ/デストラクタ
  //////////////////////////////////////////////////////////////////////

  /// @brief コンストラクタ
  CutHash();

  /// @brief デストラクタ
  ~CutHash();


public:
  //////////////////////////////////////////////////////////////////////
  // 外部インターフェイス
  //////////////////////////////////////////////////////////////////////

  /// @brief 内容をクリアする．
  void
  clear();

  /// @brief 関数に対応するカットを返す．
  Cut*
  find(TvFunc f);

  /// @brief カットを登録する．
  void
  put(Cut* cut);


private:
  //////////////////////////////////////////////////////////////////////
  // 内部で用いられる関数
  //////////////////////////////////////////////////////////////////////

  // ハッシュ表を拡大する．
  void
  alloc_table(ymuint32 new_size);


private:
  //////////////////////////////////////////////////////////////////////
  // データメンバ
  //////////////////////////////////////////////////////////////////////

  // テーブルサイズ
  ymuint32 mTableSize;

  // 要素数
  ymuint32 mNum;

  // ハッシュ表
  Cut** mTable;

  // ハッシュ表を拡張する目安
  ymuint32 mNextLimit;

};

END_NAMESPACE_YM_NETWORKS

#endif // CUTHASH_H
